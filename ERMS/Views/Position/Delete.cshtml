@model ERMS.ViewModels.Position.DeletePositionViewModel
@{
    ViewData["Title"] = "Delete Position";
    bool hasEmployees = Model.EmployeeCount > 0;
}

<link rel="stylesheet" href="~/css/Department-Position.css" />

<div class="pp-wrap pp-wrap-sm">

    <div class="pp-header">
        <div>
            <p class="pp-eyebrow">Positions</p>
            <h1 class="pp-title">Delete Position</h1>
        </div>
    </div>

    <!-- Danger banner -->
    <div class="pp-danger-banner">
        <div class="pp-danger-icon">
            <span class="glyphicon glyphicon-trash"></span>
        </div>
        <div>
            @if (hasEmployees)
            {
                <div class="pp-danger-title">Cannot delete this position</div>
                <div class="pp-danger-text">
                    <strong>@Model.EmployeeCount employee@(Model.EmployeeCount == 1 ? " is" : "s are")</strong>
                    currently assigned to this position. Reassign or remove them before deleting.
                </div>
            }
            else
            {
                <div class="pp-danger-title">This action is permanent</div>
                <div class="pp-danger-text">
                    Deleting <strong>@Model.Title</strong> will permanently remove it from the system.
                    This cannot be undone.
                </div>
            }
        </div>
    </div>

    <!-- Position summary card -->
    <div class="pp-card">
        <div class="pp-card-head">
            <span class="pp-card-label">
                <span class="pp-card-icon" style="@(hasEmployees ? "background:rgba(239,68,68,.1);color:#ef4444;" : "")">
                    <span class="glyphicon glyphicon-briefcase"></span>
                </span>
                @Model.Title
            </span>
            @if (hasEmployees)
            {
                <span class="pp-chip pp-chip-danger">
                    <span class="glyphicon glyphicon-warning-sign" style="font-size:10px;"></span>
                    @Model.EmployeeCount assigned
                </span>
            }
            else
            {
                <span class="pp-chip pp-chip-muted">No employees assigned</span>
            }
        </div>

        <div class="pp-info-grid">
            <div class="pp-info-cell">
                <div class="pp-info-key">Title</div>
                <div class="pp-info-val">@Model.Title</div>
            </div>
            <div class="pp-info-cell">
                <div class="pp-info-key">Base Salary</div>
                <div class="pp-info-val mono">@Model.BaseSalary.ToString("C")</div>
            </div>
            <div class="pp-info-cell full">
                <div class="pp-info-key">Description</div>
                <div class="pp-info-val">
                    @if (!string.IsNullOrWhiteSpace(Model.Description))
                    {
                        @Model.Description
                    }
                    else
                    {
                        <span style="color:var(--text-muted); font-style:italic;">No description.</span>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm form -->
    <form asp-action="Delete" method="post">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="Id" />

        <div class="pp-actions">
            <a asp-action="Index" class="btn btn-default btn-lg">
                <span class="glyphicon glyphicon-arrow-left"></span>
                @(hasEmployees ? "Back to List" : "Cancel")
            </a>
            <div class="pp-actions-right">
                @if (!hasEmployees)
                {
                    <button type="submit" class="btn-pp-delete">
                        <span class="glyphicon glyphicon-trash"></span>
                        Yes, Delete Position
                    </button>
                }
                else
                {
                    <button type="button" class="btn-pp-delete" disabled>
                        <span class="glyphicon glyphicon-ban-circle"></span>
                        Cannot Delete
                    </button>
                }
            </div>
        </div>
    </form>

</div>
