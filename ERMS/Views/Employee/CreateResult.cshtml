@model ERMS.ViewModels.Employee.CreateEmployeeResultViewModel
@{
    ViewBag.Title = Model.Success ? "Employee Created" : "Creation Failed";
}

<link rel="stylesheet" href="~/css/Employee.css" />

<div class="ep-wrap ep-wrap-sm">

    <p class="ep-page-eyebrow">Employees</p>
    <h1 class="ep-page-title">@(Model.Success ? "Employee Created" : "Something Went Wrong")</h1>

    <!-- ── Hero card ── -->
    <div class="ep-card">
        <div class="ep-result-hero">
            <div class="ep-result-icon @(Model.Success ? "success" : "fail")">
                <span class="glyphicon glyphicon-@(Model.Success ? "ok" : "remove")"></span>
            </div>
            <div class="ep-result-title">
                @(Model.Success ? "All done!" : "Creation Failed")
            </div>
            <div class="ep-result-sub">@Model.Message</div>
        </div>

        @if (Model.Success)
        {
            <div class="ep-card-body">

                <!-- Credentials block -->
                <p class="ep-section-label" style="margin-bottom: 12px;">
                    <span class="ep-section-icon"><span class="glyphicon glyphicon-user"></span></span>
                    &nbsp; Employee Credentials
                </p>

                <div class="ep-creds">
                    <div class="ep-creds-row">
                        <span class="ep-creds-key">Full Name</span>
                        <span class="ep-creds-val">@Model.EmployeeName</span>
                    </div>
                    <div class="ep-creds-row">
                        <span class="ep-creds-key">Email Address</span>
                        <span class="ep-creds-val">@Model.Email</span>
                    </div>
                    <div class="ep-creds-row">
                        <span class="ep-creds-key">Username</span>
                        <span class="ep-creds-val">@Model.Username</span>
                    </div>
                    <div class="ep-creds-row">
                        <span class="ep-creds-key">Temporary Password</span>
                        <span class="ep-creds-val highlight">@Model.GeneratedPassword</span>
                    </div>
                </div>

                <!-- Email status -->
                @if (Model.EmailSent)
                {
                    <div class="ep-alert success">
                        <span class="ep-alert-icon glyphicon glyphicon-envelope"></span>
                        <div class="ep-alert-content">
                            <strong>Credentials emailed</strong>
                            Login details have been sent to <strong>@Model.Email</strong>.
                        </div>
                    </div>
                }
                else
                {
                    <div class="ep-alert warning">
                        <span class="ep-alert-icon glyphicon glyphicon-warning-sign"></span>
                        <div class="ep-alert-content">
                            <strong>Email delivery failed</strong>
                            Please share the credentials below directly with the employee.
                            The password will <strong>not</strong> be shown again.
                            <div class="ep-manual-creds" style="margin-top: 12px;">
                                <div><strong>Username:</strong> &nbsp;@Model.Username</div>
                                <div><strong>Password:</strong> &nbsp;@Model.GeneratedPassword</div>
                            </div>
                        </div>
                    </div>
                }

                <!-- Security notice -->
                <div class="ep-alert warning">
                    <span class="ep-alert-icon glyphicon glyphicon-lock"></span>
                    <div class="ep-alert-content">
                        <strong>Security notice</strong>
                        The employee should change their password immediately upon first login.
                    </div>
                </div>

            </div>
        }
        else
        {
            <div class="ep-card-body">
                <div class="ep-alert danger">
                    <span class="ep-alert-icon glyphicon glyphicon-exclamation-sign"></span>
                    <div class="ep-alert-content">
                        <strong>Error</strong>
                        @Model.Message
                    </div>
                </div>
            </div>
        }
    </div>

    <!-- ── Actions ── -->
    <div class="ep-actions">
        <a href="@Url.Action("Index", "Employee")" class="btn btn-default btn-lg">
            <span class="glyphicon glyphicon-list"></span> Back to List
        </a>
        <a href="@Url.Action("Create", "Employee")" class="btn btn-primary btn-lg">
            <span class="glyphicon glyphicon-plus"></span> Add Another
        </a>
        @if (Model.Success)
        {
            <a href="@Url.Action("Details", "Employee", new { id = Model.EmployeeId })" class="btn btn-info btn-lg">
                <span class="glyphicon glyphicon-eye-open"></span> View Employee
            </a>
        }
    </div>

</div>
